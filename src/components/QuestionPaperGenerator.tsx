import React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Download, FileText, Loader2 } from 'lucide-react';\nimport { toast } from 'sonner';\n\ninterface QuestionPaperGeneratorProps {\n  examId: string;\n  examTitle: string;\n}\n\nconst QuestionPaperGenerator: React.FC<QuestionPaperGeneratorProps> = ({ \n  examId, \n  examTitle \n}) => {\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  const handleGenerateQuestionPaper = async () => {\n    try {\n      setIsGenerating(true);\n      \n      const token = localStorage.getItem('token');\n      if (!token) {\n        toast.error('Authentication required');\n        return;\n      }\n\n      const response = await fetch(\n        `http://localhost:3001/api/generate-question-paper/${examId}`,\n        {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to generate question paper');\n      }\n\n      // Create blob from response\n      const blob = await response.blob();\n      \n      // Create download link\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      \n      // Generate filename\n      const filename = `${examTitle.replace(/[^a-zA-Z0-9]/g, '_')}_Question_Paper.pdf`;\n      link.download = filename;\n      \n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n      \n      // Cleanup\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('Question paper generated successfully!');\n      \n    } catch (error) {\n      console.error('Error generating question paper:', error);\n      toast.error(error instanceof Error ? error.message : 'Failed to generate question paper');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <Button\n      onClick={handleGenerateQuestionPaper}\n      disabled={isGenerating}\n      variant=\"outline\"\n      size=\"sm\"\n      className=\"gap-2\"\n    >\n      {isGenerating ? (\n        <>\n          <Loader2 className=\"h-4 w-4 animate-spin\" />\n          Generating...\n        </>\n      ) : (\n        <>\n          <FileText className=\"h-4 w-4\" />\n          <Download className=\"h-4 w-4\" />\n          Question Paper PDF\n        </>\n      )}\n    </Button>\n  );\n};\n\nexport default QuestionPaperGenerator;